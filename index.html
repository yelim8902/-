<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta
      name="google-site-verification"
      content="jNm5P-DzoPup4LyS-FpNRPqgbaSvyQbqCZrvw3E3K04"
    />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Primary Meta Tags -->
    <title>ë²Œì¹™ ë£°ë › - ì»¤í”Œ ë²Œì¹™, 19ê¸ˆ ë²Œì¹™ ë£°ë › ëŒë¦¬ê¸° | ì¹œêµ¬ ê²Œì„</title>
    <meta
      name="title"
      content="ë²Œì¹™ ë£°ë › - ì»¤í”Œ ë²Œì¹™, 19ê¸ˆ ë²Œì¹™ ë£°ë › ëŒë¦¬ê¸° | ì¹œêµ¬ ê²Œì„"
    />
    <meta
      name="description"
      content="ì»¤í”Œ ë²Œì¹™ ë£°ë ›, 19ê¸ˆ ë²Œì¹™ ë£°ë › ë¬´ë£Œë¡œ ëŒë¦¬ê¸°! ì¹œêµ¬ë“¤ê³¼ ë³´ë“œê²Œì„í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì¬ë¯¸ìˆëŠ” ë²Œì¹™ ë£°ë ›. ì»¤í”Œìš© ë³´í†µë§›/ë§¤ìš´ë§› ë²„ì „, ì»¤ìŠ¤í…€ ë²Œì¹™ ì¶”ê°€, íŒŒì›Œ ì¡°ì ˆ ê¸°ëŠ¥ê¹Œì§€. ë°”ë¡œ ì‚¬ìš©í•˜ì„¸ìš”!"
    />
    <meta
      name="keywords"
      content="ì»¤í”Œ ë²Œì¹™, 19ê¸ˆ ë²Œì¹™, ì»¤í”Œ ë²Œì¹™ ë£°ë ›, 19ê¸ˆ ë²Œì¹™ ë£°ë ›, ë²Œì¹™ ë£°ë ›, ë²Œì¹™ ëŒë¦¼íŒ, ë³´ë“œê²Œì„ ë²Œì¹™, ì»¤í”Œ ë£°ë ›, 19ê¸ˆ ë£°ë ›, ë²Œì¹™ ê²Œì„, ì¹œêµ¬ ê²Œì„, ë£°ë › ëŒë¦¬ê¸°, ë¬´ë£Œ ë£°ë ›, ì»¤í”Œ ê²Œì„, ë°ì´íŠ¸ ê²Œì„"
    />
    <meta name="author" content="ë²Œì¹™ ë£°ë ›" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="Korean" />
    <meta name="revisit-after" content="7 days" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://penalty-roulette.vercel.app/" />
    <meta
      property="og:title"
      content="ë²Œì¹™ ë£°ë › - ì»¤í”Œ ë²Œì¹™, 19ê¸ˆ ë²Œì¹™ ë£°ë › ëŒë¦¬ê¸°"
    />
    <meta
      property="og:description"
      content="ì»¤í”Œ ë²Œì¹™ ë£°ë ›, 19ê¸ˆ ë²Œì¹™ ë£°ë › ë¬´ë£Œë¡œ ëŒë¦¬ê¸°! ì¹œêµ¬ë“¤ê³¼ ë³´ë“œê²Œì„í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì¬ë¯¸ìˆëŠ” ë²Œì¹™ ë£°ë ›. ì»¤í”Œìš© ë³´í†µë§›/ë§¤ìš´ë§› ë²„ì „, ì»¤ìŠ¤í…€ ë²Œì¹™ ì¶”ê°€, íŒŒì›Œ ì¡°ì ˆ ê¸°ëŠ¥ê¹Œì§€. ë°”ë¡œ ì‚¬ìš©í•˜ì„¸ìš”!"
    />
    <meta
      property="og:image"
      content="https://penalty-roulette.vercel.app/og-image.png"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:locale" content="ko_KR" />
    <meta property="og:site_name" content="ë²Œì¹™ ë£°ë ›" />
    <meta property="og:image:type" content="image/png" />
    <meta
      property="og:image:secure_url"
      content="https://penalty-roulette.vercel.app/og-image.png"
    />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta
      property="twitter:url"
      content="https://penalty-roulette.vercel.app/"
    />
    <meta
      property="twitter:title"
      content="ë²Œì¹™ ë£°ë › - ì»¤í”Œ ë²Œì¹™, 19ê¸ˆ ë²Œì¹™ ë£°ë › ëŒë¦¬ê¸°"
    />
    <meta
      property="twitter:description"
      content="ì»¤í”Œ ë²Œì¹™ ë£°ë ›, 19ê¸ˆ ë²Œì¹™ ë£°ë › ë¬´ë£Œë¡œ ëŒë¦¬ê¸°! ì¹œêµ¬ë“¤ê³¼ ë³´ë“œê²Œì„í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì¬ë¯¸ìˆëŠ” ë²Œì¹™ ë£°ë ›. ì»¤í”Œìš© ë³´í†µë§›/ë§¤ìš´ë§› ë²„ì „, ì»¤ìŠ¤í…€ ë²Œì¹™ ì¶”ê°€, íŒŒì›Œ ì¡°ì ˆ ê¸°ëŠ¥ê¹Œì§€. ë°”ë¡œ ì‚¬ìš©í•˜ì„¸ìš”!"
    />
    <meta
      property="twitter:image"
      content="https://penalty-roulette.vercel.app/og-image.png"
    />

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon.png" />
    <link rel="shortcut icon" type="image/png" href="/favicon.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon.png" />

    <!-- Canonical URL -->
    <link rel="canonical" href="https://penalty-roulette.vercel.app/" />

    <!-- Google Analytics -->
    <!-- TODO: Google Analytics ì¸¡ì • IDë¥¼ ë°œê¸‰ë°›ì•„ ì•„ë˜ì— ì¶”ê°€í•˜ì„¸ìš” -->
    <!-- 
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-XXXXXXXXXX');
    </script>
    -->

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "ë²Œì¹™ ë£°ë › - ì»¤í”Œ ë²Œì¹™, 19ê¸ˆ ë²Œì¹™ ë£°ë ›",
        "description": "ì»¤í”Œ ë²Œì¹™ ë£°ë ›, 19ê¸ˆ ë²Œì¹™ ë£°ë › ë¬´ë£Œ ê²Œì„. ì¹œêµ¬ë“¤ê³¼ ë³´ë“œê²Œì„í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì¬ë¯¸ìˆëŠ” ë²Œì¹™ ë£°ë ›. ì»¤í”Œìš© ë³´í†µë§›/ë§¤ìš´ë§› ë²„ì „ ì œê³µ",
        "url": "https://penalty-roulette.vercel.app/",
        "applicationCategory": "GameApplication",
        "operatingSystem": "Any",
        "keywords": "ì»¤í”Œ ë²Œì¹™, 19ê¸ˆ ë²Œì¹™, ì»¤í”Œ ë²Œì¹™ ë£°ë ›, 19ê¸ˆ ë²Œì¹™ ë£°ë ›, ë²Œì¹™ ë£°ë ›, ì»¤í”Œ ê²Œì„, ë°ì´íŠ¸ ê²Œì„",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "KRW"
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.8",
          "ratingCount": "100"
        },
        "featureList": [
          "ì»¤í”Œ ë²Œì¹™ ë£°ë ›",
          "19ê¸ˆ ë²Œì¹™ ë£°ë ›",
          "ì»¤í”Œìš© ë³´í†µë§›/ë§¤ìš´ë§› ë²„ì „",
          "ì»¤ìŠ¤í…€ ë²Œì¹™ ì¶”ê°€",
          "íŒŒì›Œ ì¡°ì ˆ ê¸°ëŠ¥",
          "ëª¨ë°”ì¼ ìµœì í™”"
        ]
      }
    </script>
    <style>
      :root {
        /* ë¯¸ë‹ˆë©€ ì»¬ëŸ¬ íŒ”ë ˆíŠ¸ */
        --bg-color: #ffffff;
        --bg-subtle: #f7f8fa;
        --border-color: #e2e8f0;
        --text-primary: #1a202c;
        --text-secondary: #4a5568;
        --text-muted: #718096;

        /* ë£°ë › ì›ìƒ‰ íŒ”ë ˆíŠ¸ */
        --roulette-red: #ff6b6b;
        --roulette-blue: #4d96ff;
        --roulette-yellow: #ffd93d;
        --roulette-green: #6bcb77;
        --roulette-purple: #9d4edd;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        overflow-x: hidden;
      }

      /* ì»¤ìŠ¤í…€ ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }

      ::-webkit-scrollbar-track {
        background: var(--bg-subtle);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb {
        background: var(--border-color);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: var(--text-muted);
      }

      /* Firefox ìŠ¤í¬ë¡¤ë°” */
      * {
        scrollbar-width: thin;
        scrollbar-color: var(--border-color) var(--bg-subtle);
      }

      body {
        font-family: "Noto Sans KR", -apple-system, BlinkMacSystemFont,
          "Segoe UI", sans-serif;
        width: 100%;
        height: 100%;
        min-height: 100vh;
        min-height: -webkit-fill-available; /* ëª¨ë°”ì¼ ì£¼ì†Œì°½ ëŒ€ì‘ */
        margin: 0;
        padding: 0;
        background: var(--bg-color);
        display: flex;
        overflow-y: auto;
        overflow-x: hidden;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        position: relative;
      }

      .container {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 24px;
        padding: 30px 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3),
          0 0 0 1px rgba(255, 255, 255, 0.5);
        max-width: 600px;
        width: 100%;
        margin: 20px;
        position: relative;
        z-index: 1;
        animation: containerPop 0.6s ease-out;
      }

      /* ëª¨ë°”ì¼ í™”ë©´ ìµœì í™” */
      @media (max-width: 768px) {
        .container {
          margin: 10px;
          padding: 20px 15px;
          border-radius: 20px;
        }
      }

      @keyframes containerPop {
        from {
          opacity: 0;
          transform: scale(0.9) translateY(20px);
        }
        to {
          opacity: 1;
          transform: scale(1) translateY(0);
        }
      }

      h1 {
        text-align: center;
        margin-bottom: 10px;
        font-size: 2.5em;
        font-weight: 700;
        letter-spacing: -0.02em;
        transition: color 0.3s ease;
      }

      .subtitle {
        text-align: center;
        color: var(--text-secondary);
        margin-bottom: 30px;
        font-size: 0.9em;
        font-weight: 400;
      }

      .version-switch {
        text-align: center;
        margin-bottom: 20px;
      }

      .version-link {
        display: inline-block;
        color: var(--text-secondary);
        text-decoration: none;
        font-weight: 500;
        padding: 8px 16px;
        border-radius: 8px;
        border: 1px solid var(--border-color);
        background: var(--bg-color);
        transition: all 0.2s;
        font-size: 0.85em;
        cursor: pointer;
        font-family: "Noto Sans KR", sans-serif;
      }

      .version-link:hover {
        background: var(--bg-subtle);
        border-color: var(--text-muted);
        color: var(--text-primary);
      }

      .roulette-container {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 30px 0;
      }

      #rouletteCanvas {
        border-radius: 50%;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        transition: box-shadow 0.3s ease;
        transform-origin: center center;
        max-width: 100%;
        height: auto;
      }

      /* ëª¨ë°”ì¼ ìµœì í™” */
      @media (max-width: 768px) {
        #rouletteCanvas {
          width: 90vw;
          max-width: 400px;
        }

        .roulette-container {
          margin: 20px 0;
        }

        .pointer {
          top: -10px;
          border-left: 10px solid transparent;
          border-right: 10px solid transparent;
          border-top: 20px solid #2d3436;
        }

        h1 {
          font-size: 2em;
        }

        .container {
          margin: 10px;
          padding: 20px 15px;
        }
      }

      @media (max-width: 480px) {
        #rouletteCanvas {
          width: 85vw;
          max-width: 350px;
        }

        h1 {
          font-size: 1.8em;
        }
      }

      .pointer {
        position: absolute;
        top: -12px;
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 0;
        border-left: 12px solid transparent;
        border-right: 12px solid transparent;
        border-top: 24px solid #2d3436;
        z-index: 10;
        filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
      }

      .controls {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-top: 20px;
      }

      .power-gauge-container {
        display: flex;
        flex-direction: column;
        gap: 6px;
        margin-bottom: 10px;
      }

      .power-gauge-wrapper {
        position: relative;
        width: 100%;
        height: 24px;
        background: var(--bg-subtle);
        border-radius: 12px;
        border: 1px solid var(--border-color);
        overflow: hidden;
      }

      .power-gauge-fill {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        width: 0%;
        background: linear-gradient(
          90deg,
          #ffd93d 0%,
          #ff6b6b 50%,
          #9d4edd 100%
        );
        border-radius: 11px;
        transition: width 0.1s linear;
      }

      .power-gauge-fill.max-power {
        background: linear-gradient(
          90deg,
          #ffd93d 0%,
          #ff6b6b 50%,
          #9d4edd 100%
        );
      }

      .power-gauge-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 0.7em;
        font-weight: 600;
        color: var(--text-muted);
        z-index: 2;
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.2s;
      }

      .power-gauge-text.show {
        opacity: 1;
      }

      .power-gauge-text.max-power {
        color: var(--text-primary);
        font-size: 0.75em;
        font-weight: 700;
      }

      .spin-button {
        background: var(--text-primary);
        color: var(--bg-color);
        border: none;
        padding: 16px 40px;
        font-size: 1.1em;
        font-weight: 600;
        border-radius: 12px;
        cursor: pointer;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: all 0.2s ease;
        position: relative;
      }

      .spin-button:hover:not(:active):not(.holding):not(:disabled) {
        background: var(--text-secondary);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
        transform: translateY(-2px);
      }

      .spin-button:active,
      .spin-button.holding {
        transform: translateY(0);
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
      }

      .spin-button:disabled {
        background: var(--border-color);
        color: var(--text-muted);
        cursor: not-allowed;
        transform: none;
      }

      .penalty-list {
        background: var(--bg-subtle);
        border-radius: 12px;
        padding: 20px;
        text-align: center;
        border: 1px solid var(--border-color);
        max-height: 300px;
        overflow-y: auto;
        overflow-x: hidden;
      }

      /* ë²Œì¹™ ë¦¬ìŠ¤íŠ¸ ë‚´ë¶€ ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
      .penalty-list::-webkit-scrollbar {
        width: 6px;
      }

      .penalty-list::-webkit-scrollbar-track {
        background: transparent;
      }

      .penalty-list::-webkit-scrollbar-thumb {
        background: var(--border-color);
        border-radius: 3px;
      }

      .penalty-list::-webkit-scrollbar-thumb:hover {
        background: var(--text-muted);
      }

      .penalty-list h3 {
        color: var(--text-primary);
        margin-bottom: 15px;
        font-size: 1em;
        font-weight: 500;
      }

      .penalty-items {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;
      }

      .penalty-badge {
        background: linear-gradient(
          135deg,
          var(--color-pink-light) 0%,
          var(--color-plum-light) 100%
        );
        color: #2d3748;
        padding: 10px 18px;
        border-radius: 20px;
        font-size: 0.9em;
        font-weight: 500;
        border: 2px solid var(--color-pink-medium);
        box-shadow: 0 2px 8px var(--color-pink-light);
        transition: all 0.3s ease;
      }

      .penalty-badge:hover {
        transform: translateY(-2px) scale(1.05);
        box-shadow: 0 4px 12px var(--color-pink-medium);
        border-color: var(--color-pink-dark);
      }

      .input-section {
        display: flex;
        gap: 8px;
        margin-bottom: 20px;
        align-items: center;
      }

      #penaltyInput {
        flex: 1;
        padding: 12px 16px;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        font-size: 0.95em;
        outline: none;
        transition: all 0.2s;
        font-family: "Noto Sans KR", sans-serif;
        background: var(--bg-color);
        color: var(--text-primary);
      }

      #penaltyInput:focus {
        border-color: var(--text-primary);
        box-shadow: 0 0 0 3px rgba(26, 32, 44, 0.1);
      }

      #penaltyInput::placeholder {
        color: var(--text-muted);
      }

      .add-button {
        background: var(--bg-subtle);
        color: var(--text-primary);
        border: 1px solid var(--border-color);
        padding: 12px 20px;
        font-size: 0.95em;
        font-weight: 500;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
        white-space: nowrap;
        flex-shrink: 0;
      }

      .add-button:hover {
        background: var(--text-primary);
        color: var(--bg-color);
        border-color: var(--text-primary);
      }

      .reset-button {
        background: transparent;
        color: var(--text-muted);
        border: 1px solid var(--border-color);
        padding: 10px;
        font-size: 1.2em;
        font-weight: 400;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        line-height: 1;
        flex-shrink: 0;
      }

      .reset-button:hover {
        background: var(--bg-subtle);
        color: var(--text-primary);
        border-color: var(--text-muted);
        transform: rotate(180deg);
      }

      .penalty-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 16px;
        margin: 4px 0;
        background: var(--bg-color);
        border-radius: 8px;
        border: 1px solid var(--border-color);
      }

      .penalty-item span {
        color: var(--text-primary);
        font-size: 0.95em;
      }

      .delete-button {
        background: transparent;
        color: var(--text-muted);
        border: 1px solid var(--border-color);
        padding: 6px 12px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.85em;
        font-weight: 500;
        transition: all 0.2s;
      }

      .delete-button:hover {
        background: var(--bg-subtle);
        color: var(--text-primary);
        border-color: var(--text-muted);
      }

      .empty-message {
        text-align: center;
        color: var(--text-muted);
        padding: 20px;
        font-style: italic;
      }

      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        justify-content: center;
        align-items: center;
      }

      .modal-content {
        background: var(--bg-color);
        padding: 40px;
        border-radius: 16px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        border: 1px solid var(--border-color);
        max-width: 90%;
        max-height: 90vh;
        overflow-y: auto;
        overflow-x: hidden;
      }

      /* ëª¨ë‹¬ ë‚´ë¶€ ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
      .modal-content::-webkit-scrollbar {
        width: 6px;
      }

      .modal-content::-webkit-scrollbar-track {
        background: transparent;
      }

      .modal-content::-webkit-scrollbar-thumb {
        background: var(--border-color);
        border-radius: 3px;
      }

      .modal-content::-webkit-scrollbar-thumb:hover {
        background: var(--text-muted);
      }

      .modal-content h2 {
        color: var(--text-primary);
        margin-bottom: 20px;
        font-size: 2.2em;
        font-weight: 700;
      }

      .modal-content p {
        font-size: 1.3em;
        color: var(--text-primary);
        margin-bottom: 30px;
        font-weight: 500;
      }

      .modal-close {
        background: var(--text-primary);
        color: var(--bg-color);
        border: none;
        padding: 12px 32px;
        font-size: 1em;
        font-weight: 600;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .modal-close:hover {
        background: var(--text-secondary);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 id="mainTitle">ë²Œì¹™ ë£°ë ›</h1>

      <div class="version-switch">
        <button id="modeSwitch" class="version-link">
          â†’ ì»¤í”Œ ë£°ë ›ìœ¼ë¡œ ì´ë™
        </button>
      </div>

      <div class="roulette-container">
        <div class="pointer"></div>
        <canvas id="rouletteCanvas" width="600" height="600"></canvas>
      </div>

      <div class="controls">
        <div class="power-gauge-container">
          <div class="power-gauge-wrapper">
            <div class="power-gauge-fill" id="powerGaugeFill"></div>
            <div class="power-gauge-text" id="powerGaugeText">
              ë²„íŠ¼ì„ ëˆ„ë¥´ê³  ìˆìœ¼ì„¸ìš”
            </div>
          </div>
        </div>
        <button class="spin-button" id="spinButton">ëŒë¦¬ê¸°</button>

        <div class="input-section">
          <input
            type="text"
            id="penaltyInput"
            placeholder="ë²Œì¹™ì„ ì…ë ¥í•˜ì„¸ìš”..."
          />
          <button class="add-button" id="addButton">ì¶”ê°€</button>
          <button class="reset-button" id="resetButton" title="ì´ˆê¸°í™”">
            â†»
          </button>
        </div>

        <div class="penalty-list" id="penaltyList">
          <!-- ë²Œì¹™ í•­ëª©ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
        </div>
      </div>
    </div>

    <!-- ê²°ê³¼ ëª¨ë‹¬ -->
    <div class="modal" id="resultModal">
      <div class="modal-content">
        <h2>ê²°ê³¼</h2>
        <p id="resultText"></p>
        <button class="modal-close" id="closeModal">í™•ì¸</button>
      </div>
    </div>

    <script>
      // Canvasì™€ ì»¨í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
      const canvas = document.getElementById("rouletteCanvas");
      const ctx = canvas.getContext("2d");
      const spinButton = document.getElementById("spinButton");
      const addButton = document.getElementById("addButton");
      const resetButton = document.getElementById("resetButton");
      const penaltyInput = document.getElementById("penaltyInput");
      const penaltyList = document.getElementById("penaltyList");
      const resultModal = document.getElementById("resultModal");
      const resultText = document.getElementById("resultText");
      const closeModal = document.getElementById("closeModal");
      const mainTitle = document.getElementById("mainTitle");
      const modeSwitch = document.getElementById("modeSwitch");

      // ëª¨ë“œ ë°ì´í„° êµ¬ì¡°
      const modes = {
        basic: {
          title: "ë²Œì¹™ ë£°ë ›",
          switchText: "â†’ ì»¤í”Œ ë£°ë ›ìœ¼ë¡œ ì´ë™",
          themeColor: "#1a202c",
          penalties: [
            "ëˆ„ë‚˜/ì–¸ë‹ˆ/í˜•/ì˜¤ë¹  í˜¸ì¹­ ì“°ê¸°",
            "ì˜† í…Œì´ë¸” ê°€ì„œ ì¸ì‚¬í•˜ê³  ì˜¤ê¸°",
            'ë¶€ëª¨ë‹˜ê»˜ "í‚¤ì›Œì£¼ì…”ì„œ ê°ì‚¬" ì „í™”',
            'ì§€ì¸ì—ê²Œ ì „í™”í•´ "ì‚¬ë‘í•´" ë“£ê¸°',
            "2ì°¨ ê³„ì‚°í•˜ê¸° (ì§€ê°‘ ì˜¤í”ˆ)",
            "ë‹¤ê°™ì´ ë¦´ìŠ¤/í‹±í†¡ ì°ê¸°",
            "í‘ì—­ì‚¬ ì—½ì‚¬ ê³µê°œ",
            "ì¹´í†¡ í”„ì‚¬ 1ì‹œê°„ ë™ì•ˆ ì—½ì‚¬",
            "ì „ì• ì¸/ì§ì‚¬ë‘ SNS ì¢‹ì•„ìš” ëˆ„ë¥´ê¸°",
            "ê°¤ëŸ¬ë¦¬ 10ë²ˆì§¸ ì‚¬ì§„ ë¬´ì¡°ê±´ ê³µê°œ",
            'ê°€ì¡±í†¡ë°© "ì‚¬ë‘í•´" ë³´ë‚´ê³  ìº¡ì³',
            "ì˜¤ëŠ˜ í•˜ë£¨ì¢…ì¼ ê·¹ì¡´ì¹­ ì“°ê¸°",
            'í¸ì˜ì  ê°€ì„œ "ì € ê¸°ì–µ ì•ˆ ë‚˜ì„¸ìš”?" ë¬»ê¸°',
            "ë¬´ë°˜ì£¼ ëŒ„ìŠ¤ 30ì´ˆ (ì œë¡œíˆ¬ ë“±)",
          ],
          colors: [
            "#FF6B6B", // ë ˆë“œ
            "#4D96FF", // ë¸”ë£¨
            "#FFD93D", // ì˜ë¡œìš°
            "#6BCB77", // ê·¸ë¦°
            "#9D4EDD", // í¼í”Œ
          ],
        },
        couple_normal: {
          title: "ì»¤í”Œ ë£°ë › (ë³´í†µë§›)",
          switchText: "â†’ ë§¤ìš´ë§›ìœ¼ë¡œ ì´ë™",
          themeColor: "#ff69b4",
          penalties: [
            "ëˆˆ ë§ˆì£¼ì¹˜ê³  í‚¤ìŠ¤ 10ì´ˆ (ëˆˆ ê°ê¸° ê¸ˆì§€)",
            "ê·€ì— ë°”ëŒ ë¶ˆê³  'ì‚¬ë‘í•´' ì†ì‚­ì´ê¸°",
            "ë‹¤ìŒ ë°ì´íŠ¸ í’€ì½”ìŠ¤ ì˜ê¸° (ì§€ê°‘ ì˜¤í”ˆ)",
            "ìƒëŒ€ë°© ì´ë¦„ìœ¼ë¡œ ì• êµ ì„ì¸ 3í–‰ì‹œ (ë¬´í‘œì •í•˜ë©´ ë”±ë°¤)",
            "ì„œë¡œ ë“± ë°€ì–´ì£¼ê¸° (ëª©ìš•íƒ•/ìŠ¤íŒŒ ë°ì´íŠ¸)",
            "'ì£¼ì¸ë‹˜' í˜¸ì¹­ ì“°ë©° ë§ˆì‚¬ì§€ 5ë¶„",
            "ìƒëŒ€ë°© ì•„ë«ì…ìˆ  ì ¤ë¦¬ì²˜ëŸ¼ 'ì•™' ê¹¨ë¬¼ê¸°",
            "ì´ì„±ì„ ìƒê²Œ ë§Œë“œëŠ” ì„¹ì‹œ ëŒ„ìŠ¤",
            "ë°±í—ˆê·¸ í•˜ê³  1ë¶„ê°„ ê·“ì†ë§",
            "ìì‹  ìˆëŠ” ì‹ ì²´ ë¶€ìœ„ ìë‘í•˜ê¸°",
            "ê³µì£¼ë‹˜ ì•ˆê¸°ë¡œ ìŠ¤ì¿¼íŠ¸ 5íšŒ",
            "ë¬´ë¦ ë² ê³  ëˆ„ì›Œì„œ ì•„ì´ì»¨íƒ 1ë¶„",
            "í˜¸ìº‰ìŠ¤ ì˜ê¸° (ë‚ ì§œëŠ” ìŠ¹ìê°€ ì§€ì •)",
          ],
          colors: [
            "#FF69B4", // í•«í•‘í¬
            "#FFB6C1", // ë¼ì´íŠ¸í•‘í¬
            "#FF91A4", // ë¡œì¦ˆí•‘í¬
            "#FFC0CB", // í•‘í¬
            "#FFB3BA", // ë°”ë¸”ê²€í•‘í¬
          ],
        },
        couple_spicy: {
          title: "19ê¸ˆ ì»¤í”Œ ë£°ë › (ë§¤ìš´ë§›)",
          switchText: "â†’ ë²Œì¹™ ë£°ë ›ìœ¼ë¡œ ì´ë™",
          themeColor: "#ff1493",
          penalties: [
            "ë”¥í‚¤ìŠ¤ 10ì´ˆ í•˜ê¸°",
            "ì›í•˜ëŠ” ë¶€ìœ„ì— í‚¤ìŠ¤",
            "ê·€ ê¹¨ë¬¼ê³  ì•¼í•œ ë§ ì†ì‚­ì´ê¸°",
            "ì „ì‹  ë§ˆì‚¬ì§€ 10ë¶„ (ë¶€ìœ„ ì§€ì •)",
            "ì…ì—ì„œ ì…ìœ¼ë¡œ ì–¼ìŒ ì˜®ê¸°ê¸°",
            "ìƒì˜ íƒˆì˜ (or ì˜· í•˜ë‚˜ ë²—ê¸°)",
            "ë¬´ë¦ ìœ„ì— ì•‰ì•„ì„œ ê²Œì„í•˜ê¸°",
            "ë¬´ë°˜ì£¼ ì„¹ì‹œ ëŒ„ìŠ¤ 30ì´ˆ",
            "ì›í•˜ëŠ” ì½”ìŠ¤í”„ë ˆ í•´ì£¼ê¸° (ì•½ì†)",
            "ëª©ëœë¯¸/ì‡„ê³¨ì— ì§„í•œ í‚¤ìŠ¤",
            "ì†Œì› 1ê°œ ë“¤ì–´ì£¼ê¸° (ê±°ë¶€ ë¶ˆê°€)",
            "ì„œë¡œ ê½‰ ê»´ì•ˆê³  1ë¶„ ë²„í‹°ê¸°",
            "ì˜¤ëŠ˜ ë°¤ 'ì£¼ì¸ë‹˜'ìœ¼ë¡œ ëª¨ì‹œê¸°",
            "ê½ (ë‹¤ìŒ ê¸°íšŒì—...)",
          ],
          colors: [
            "#FF1493", // ë”¥í•‘í¬
            "#FF69B4", // í•«í•‘í¬
            "#FF6B9D", // ë¡œì¦ˆ
            "#FF91A4", // ë¡œì¦ˆí•‘í¬
            "#C71585", // ë¯¸ë””ì—„ ë°”ì´ì˜¬ë › ë ˆë“œ
          ],
        },
      };

      // í˜„ì¬ ëª¨ë“œ ìƒíƒœ
      let currentMode = "basic";

      // ë²Œì¹™ ë°ì´í„° ë°°ì—´ (ì‚¬ìš©ìê°€ ìˆ˜ì • ê°€ëŠ¥)
      let penalties = [...modes[currentMode].penalties];

      // ë£°ë › íšŒì „ ê´€ë ¨ ë³€ìˆ˜
      let currentRotation = 0;
      let isSpinning = false;

      // íŒŒì›Œ ê²Œì´ì§€ ê´€ë ¨ ë³€ìˆ˜
      const powerGaugeFill = document.getElementById("powerGaugeFill");
      const powerGaugeText = document.getElementById("powerGaugeText");
      let powerLevel = 0; // 0 ~ 100
      let isCharging = false;
      let chargeStartTime = 0;
      let chargeInterval = null;
      const MAX_CHARGE_TIME = 2000; // ìµœëŒ€ ì¶©ì „ ì‹œê°„ (2ì´ˆ)

      // í˜„ì¬ ëª¨ë“œì˜ ë£°ë › ìƒ‰ìƒ ê°€ì ¸ì˜¤ê¸°
      function getColors() {
        return modes[currentMode].colors;
      }

      // SEO ë©”íƒ€ íƒœê·¸ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
      function updateMetaTags(mode) {
        const modeData = modes[mode];
        const descriptions = {
          basic:
            "ì¹œêµ¬ë“¤ê³¼ ë³´ë“œê²Œì„í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì¬ë¯¸ìˆëŠ” ë²Œì¹™ ë£°ë ›! ì»¤ìŠ¤í…€ ë²Œì¹™ ì¶”ê°€ ê°€ëŠ¥, íŒŒì›Œ ì¡°ì ˆ ê¸°ëŠ¥ê¹Œì§€. ë¬´ë£Œë¡œ ë°”ë¡œ ì‚¬ìš©í•˜ì„¸ìš”!",
          couple_normal:
            "ì»¤í”Œì„ ìœ„í•œ ë¡œë§¨í‹±í•œ ë²Œì¹™ ë£°ë ›! ë³´í†µë§› ë²„ì „ìœ¼ë¡œ ë¶€ë‹´ ì—†ì´ ì¦ê¸¸ ìˆ˜ ìˆì–´ìš”. ë°ì´íŠ¸ë‚˜ íŠ¹ë³„í•œ ì‹œê°„ì— í™œìš©í•´ë³´ì„¸ìš”.",
          couple_spicy:
            "19ê¸ˆ ì»¤í”Œ ë£°ë › ë§¤ìš´ë§›! ë” ìŠ¤ë¦´ ìˆëŠ” ì»¤í”Œ ê²Œì„ì„ ì›í•œë‹¤ë©´? ë„ì „í•´ë³´ì„¸ìš” ğŸ”¥",
        };

        // Title ì—…ë°ì´íŠ¸
        document.title = `${modeData.title} - ë²Œì¹™ ë£°ë ›`;

        // Meta description ì—…ë°ì´íŠ¸
        const metaDescription = document.querySelector(
          'meta[name="description"]'
        );
        if (metaDescription) {
          metaDescription.content = descriptions[mode] || descriptions.basic;
        }

        // OG tags ì—…ë°ì´íŠ¸
        const ogTitle = document.querySelector('meta[property="og:title"]');
        const ogDescription = document.querySelector(
          'meta[property="og:description"]'
        );
        if (ogTitle) ogTitle.content = `${modeData.title} - ë²Œì¹™ ë£°ë ›`;
        if (ogDescription)
          ogDescription.content = descriptions[mode] || descriptions.basic;

        // Twitter tags ì—…ë°ì´íŠ¸
        const twitterTitle = document.querySelector(
          'meta[property="twitter:title"]'
        );
        const twitterDescription = document.querySelector(
          'meta[property="twitter:description"]'
        );
        if (twitterTitle)
          twitterTitle.content = `${modeData.title} - ë²Œì¹™ ë£°ë ›`;
        if (twitterDescription)
          twitterDescription.content = descriptions[mode] || descriptions.basic;
      }

      // ëª¨ë“œ ì „í™˜ í•¨ìˆ˜
      function switchMode() {
        // ëª¨ë“œ ìˆœí™˜: basic -> couple_normal -> couple_spicy -> basic
        if (currentMode === "basic") {
          currentMode = "couple_normal";
        } else if (currentMode === "couple_normal") {
          currentMode = "couple_spicy";
        } else {
          currentMode = "basic";
        }
        const mode = modes[currentMode];

        // SEO ë©”íƒ€ íƒœê·¸ ì—…ë°ì´íŠ¸
        updateMetaTags(currentMode);

        // ì œëª© ì—…ë°ì´íŠ¸
        mainTitle.textContent = mode.title;
        mainTitle.style.color = mode.themeColor;

        // ëª¨ë“œ ì „í™˜ ë²„íŠ¼ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
        modeSwitch.textContent = mode.switchText;

        // ë²Œì¹™ ëª©ë¡ ì´ˆê¸°í™”
        penalties = [...mode.penalties];

        // ë£°ë › íšŒì „ ì´ˆê¸°í™”
        currentRotation = 0;
        canvas.style.transform = "rotate(0deg)";

        // íŒŒì›Œ ê²Œì´ì§€ ì´ˆê¸°í™”
        powerLevel = 0;
        updatePowerGauge(0);

        // UI ì—…ë°ì´íŠ¸
        updatePenaltyList();
        drawRoulette();
      }

      // ì´ˆê¸°í™”
      function init() {
        // í˜„ì¬ ëª¨ë“œì— ë§ê²Œ ì´ˆê¸°í™”
        const mode = modes[currentMode];

        // SEO ë©”íƒ€ íƒœê·¸ ì´ˆê¸°í™”
        updateMetaTags(currentMode);

        mainTitle.textContent = mode.title;
        mainTitle.style.color = mode.themeColor;
        modeSwitch.textContent = mode.switchText;

        // ë²Œì¹™ ëª©ë¡ ì´ˆê¸°í™” (ì¤‘ìš”!)
        penalties = [...mode.penalties];

        // ë£°ë › íšŒì „ ì´ˆê¸°í™”
        currentRotation = 0;
        canvas.style.transform = "rotate(0deg)";
        // íŒŒì›Œ ê²Œì´ì§€ ì´ˆê¸°í™”
        powerLevel = 0;
        updatePowerGauge(0);
        updatePenaltyList();
        drawRoulette();
      }

      // ë²Œì¹™ ëª©ë¡ UI ì—…ë°ì´íŠ¸
      function updatePenaltyList() {
        penaltyList.innerHTML = "";

        if (penalties.length === 0) {
          penaltyList.innerHTML =
            '<div class="empty-message">ë²Œì¹™ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”!</div>';
          return;
        }

        penalties.forEach((penalty, index) => {
          const item = document.createElement("div");
          item.className = "penalty-item";
          item.innerHTML = `
                    <span>${penalty}</span>
                    <button class="delete-button" onclick="deletePenalty(${index})">ì‚­ì œ</button>
                `;
          penaltyList.appendChild(item);
        });
      }

      // ë²Œì¹™ ì‚­ì œ í•¨ìˆ˜
      function deletePenalty(index) {
        penalties.splice(index, 1);
        updatePenaltyList();
        drawRoulette();
      }

      // ë²Œì¹™ ì¶”ê°€ í•¨ìˆ˜
      function addPenalty() {
        const text = penaltyInput.value.trim();
        if (text === "") {
          alert("ë²Œì¹™ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
          return;
        }
        if (penalties.includes(text)) {
          alert("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë²Œì¹™ì…ë‹ˆë‹¤!");
          return;
        }
        penalties.push(text);
        penaltyInput.value = "";
        updatePenaltyList();
        drawRoulette();
      }

      // ë²Œì¹™ ì´ˆê¸°í™” í•¨ìˆ˜
      function resetPenalties() {
        if (confirm("ë²Œì¹™ ëª©ë¡ì„ ì´ˆê¸° ìƒíƒœë¡œ ë˜ëŒë¦¬ì‹œê² ìŠµë‹ˆê¹Œ?")) {
          penalties = [...modes[currentMode].penalties];
          updatePenaltyList();
          drawRoulette();
        }
      }

      // í…ìŠ¤íŠ¸ë¥¼ ì—¬ëŸ¬ ì¤„ë¡œ ë‚˜ëˆ„ëŠ” í•¨ìˆ˜
      function wrapText(text, maxWidth) {
        const words = text.split("/");
        const lines = [];
        let currentLine = "";

        words.forEach((word, index) => {
          const testLine = currentLine + (currentLine ? "/" : "") + word;
          const metrics = ctx.measureText(testLine);
          const testWidth = metrics.width;

          if (testWidth > maxWidth && currentLine) {
            lines.push(currentLine);
            currentLine = word;
          } else {
            currentLine = testLine;
          }

          // ë§ˆì§€ë§‰ ë‹¨ì–´ì´ê±°ë‚˜ "/"ê°€ ì—†ëŠ” ê²½ìš°
          if (index === words.length - 1) {
            lines.push(currentLine);
          }
        });

        // ë„ˆë¬´ ê¸¸ë©´ ê°•ì œë¡œ ë‚˜ëˆ„ê¸°
        if (lines.length === 0 || (lines.length === 1 && text.length > 15)) {
          const mid = Math.ceil(text.length / 2);
          let splitPoint = mid;
          // ê³µë°±ì´ë‚˜ íŠ¹ìˆ˜ë¬¸ì ê·¼ì²˜ì—ì„œ ë‚˜ëˆ„ê¸°
          for (let i = mid - 3; i <= mid + 3; i++) {
            if (text[i] === " " || text[i] === "/" || text[i] === "(") {
              splitPoint = i + 1;
              break;
            }
          }
          lines[0] = text.substring(0, splitPoint).trim();
          lines[1] = text.substring(splitPoint).trim();
        }

        return lines.length > 0 ? lines : [text];
      }

      // ë£°ë › ê·¸ë¦¬ê¸° í•¨ìˆ˜
      function drawRoulette() {
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const radius = 280;

        if (penalties.length === 0) {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.fillStyle = "#f0f0f0";
          ctx.beginPath();
          ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
          ctx.fill();
          ctx.fillStyle = "#999";
          ctx.font = "20px 'Noto Sans KR', sans-serif";
          ctx.textAlign = "center";
          ctx.fillText("ë²Œì¹™ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”", centerX, centerY);
          return;
        }

        const anglePerItem = (Math.PI * 2) / penalties.length;

        // ë°°ê²½ ì› ê·¸ë¦¬ê¸°
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#fff";
        ctx.beginPath();
        ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
        ctx.fill();

        // ê° ì„¹ì…˜ ê·¸ë¦¬ê¸°
        penalties.forEach((penalty, index) => {
          const startAngle = index * anglePerItem;
          const endAngle = (index + 1) * anglePerItem;

          // ì„¹ì…˜ ìƒ‰ìƒ
          const currentColors = getColors();
          ctx.fillStyle = currentColors[index % currentColors.length];
          ctx.beginPath();
          ctx.moveTo(centerX, centerY);
          ctx.arc(centerX, centerY, radius, startAngle, endAngle);
          ctx.closePath();
          ctx.fill();

          // ì„¹ì…˜ í…Œë‘ë¦¬ (ë¶€ë“œëŸ¬ìš´ í°ìƒ‰)
          ctx.strokeStyle = "#ffffff";
          ctx.lineWidth = 3;
          ctx.stroke();

          // í…ìŠ¤íŠ¸ ê·¸ë¦¬ê¸°
          ctx.save();
          ctx.translate(centerX, centerY);
          ctx.rotate(startAngle + anglePerItem / 2);

          const textRadius = radius * 0.68;
          const maxTextWidth = radius * 0.55; // ìµœëŒ€ í…ìŠ¤íŠ¸ ë„ˆë¹„

          // í°íŠ¸ ì„¤ì • (êµµê²Œ, ì¡°ê¸ˆ ë” í¬ê²Œ)
          ctx.font = "bold 13px 'Noto Sans KR', sans-serif";
          ctx.textAlign = "center";
          ctx.textBaseline = "middle";

          // í…ìŠ¤íŠ¸ë¥¼ ì—¬ëŸ¬ ì¤„ë¡œ ë‚˜ëˆ„ê¸°
          const lines = wrapText(penalty, maxTextWidth);
          const lineHeight = 16;
          const totalHeight = (lines.length - 1) * lineHeight;
          const startY = -totalHeight / 2;

          // ê° ì¤„ ê·¸ë¦¬ê¸°
          lines.forEach((line, lineIndex) => {
            const y = startY + lineIndex * lineHeight;

            // í…ìŠ¤íŠ¸ ê·¸ë¦¼ì íš¨ê³¼ (ë¶€ë“œëŸ¬ìš´ ê·¸ë¦¼ì)
            ctx.shadowColor = "rgba(0, 0, 0, 0.3)";
            ctx.shadowBlur = 6;
            ctx.shadowOffsetX = 1;
            ctx.shadowOffsetY = 1;

            // í…ìŠ¤íŠ¸ ì™¸ê³½ì„  (ë¶€ë“œëŸ¬ìš´ ê²€ì€ìƒ‰ í…Œë‘ë¦¬)
            ctx.strokeStyle = "rgba(0, 0, 0, 0.4)";
            ctx.lineWidth = 3;
            ctx.lineJoin = "round";
            ctx.miterLimit = 2;
            ctx.strokeText(line, textRadius, y);

            // ê·¸ë¦¼ì íš¨ê³¼ ì´ˆê¸°í™”
            ctx.shadowColor = "transparent";
            ctx.shadowBlur = 0;
            ctx.shadowOffsetX = 0;
            ctx.shadowOffsetY = 0;

            // í…ìŠ¤íŠ¸ ë³¸ë¬¸ (í°ìƒ‰)
            ctx.fillStyle = "#FFFFFF";
            ctx.fillText(line, textRadius, y);
          });

          ctx.restore();
        });

        // ì¤‘ì•™ ì› ê·¸ë¦¬ê¸°
        ctx.fillStyle = "#fff";
        ctx.beginPath();
        ctx.arc(centerX, centerY, 60, 0, Math.PI * 2);
        ctx.fill();
        // ì¤‘ì•™ ì› í…Œë‘ë¦¬ (ëª¨ë“œì— ë”°ë¼ ìƒ‰ìƒ ë³€ê²½)
        ctx.strokeStyle =
          currentMode === "couple_normal" || currentMode === "couple_spicy"
            ? "#ffc0cb"
            : "#e2e8f0";
        ctx.lineWidth = 3;
        ctx.stroke();
      }

      // íŒŒì›Œ ê²Œì´ì§€ ì—…ë°ì´íŠ¸
      function updatePowerGauge(level) {
        powerLevel = Math.min(100, Math.max(0, level));
        powerGaugeFill.style.width = powerLevel + "%";

        if (powerLevel >= 100) {
          powerGaugeFill.classList.add("max-power");
          powerGaugeText.classList.add("max-power", "show");
          powerGaugeText.textContent = "MAX!";
        } else if (powerLevel > 0) {
          powerGaugeFill.classList.remove("max-power");
          powerGaugeText.classList.remove("max-power");
          powerGaugeText.classList.add("show");
          powerGaugeText.textContent = Math.round(powerLevel) + "%";
        } else {
          powerGaugeFill.classList.remove("max-power");
          powerGaugeText.classList.remove("max-power", "show");
          powerGaugeText.textContent = "";
        }
      }

      // íŒŒì›Œ ì¶©ì „ ì‹œì‘
      function startCharging() {
        if (isSpinning || isCharging) return;
        if (penalties.length === 0) {
          alert("ë²Œì¹™ì„ ë¨¼ì € ì¶”ê°€í•´ì£¼ì„¸ìš”!");
          return;
        }

        isCharging = true;
        chargeStartTime = Date.now();
        spinButton.classList.add("holding");
        powerLevel = 0;
        updatePowerGauge(0);

        chargeInterval = setInterval(() => {
          const elapsed = Date.now() - chargeStartTime;
          const newPower = Math.min(100, (elapsed / MAX_CHARGE_TIME) * 100);
          updatePowerGauge(newPower);
        }, 16); // ì•½ 60fps
      }

      // íŒŒì›Œ ì¶©ì „ ì¤‘ì§€ ë° ë£°ë › íšŒì „
      function stopCharging() {
        if (!isCharging) return;

        isCharging = false;
        spinButton.classList.remove("holding");
        clearInterval(chargeInterval);

        // íŒŒì›Œ ê·¸ëŒ€ë¡œ ì‚¬ìš© (ìµœì†Œ íŒŒì›Œ ë³´ì¥ ì œê±° - ì‚´ì‚´ ëˆ„ë¥´ë©´ ë°˜ ë°”í€´ë„ ëª» ëŒ ìˆ˜ ìˆìŒ)
        spinRoulette(powerLevel);

        // ê²Œì´ì§€ ë¦¬ì…‹
        setTimeout(() => {
          updatePowerGauge(0);
        }, 100);
      }

      // ë£°ë › íšŒì „ ì• ë‹ˆë©”ì´ì…˜ (CSS Transition ì‚¬ìš©)
      function spinRoulette(power) {
        if (isSpinning) return;
        isSpinning = true;
        spinButton.disabled = true;

        // íŒŒì›Œì— ë”°ë¥¸ íšŒì „ ì„¤ì • (ìµœì†Œ 0.5ë°”í€´ ~ íŒŒì›Œ ë¹„ë¡€ ì¶”ê°€)
        const baseSpins = 0.5; // ìµœì†Œ ë°˜ ë°”í€´ë¶€í„° ì‹œì‘ (í˜ ì—†ìœ¼ë©´ 1ë°”í€´ë„ ëª» ë”)
        const extraSpins = (power / 100) * 8; // í’€íŒŒì›Œì¼ ë•Œ ì¶”ê°€ 8ë°”í€´
        const totalSpins = baseSpins + extraSpins;

        // ëœë¤ ê°ë„ ì¶”ê°€
        const randomAngle = Math.floor(Math.random() * 360);

        // ëª©í‘œ íšŒì „ ê°ë„ (í˜„ì¬ ê°ë„ì— ëˆ„ì )
        const rotateAmount = totalSpins * 360 + randomAngle;
        currentRotation += rotateAmount;

        // íšŒì „ ì‹œê°„ ì„¤ì • (1.5ì´ˆ ~ 5ì´ˆ)
        const duration = 1.5 + (power / 100) * 3.5;

        // ì´ì „ transition ì œê±° (ë¶€ë“œëŸ¬ìš´ ì „í™˜ì„ ìœ„í•´)
        canvas.style.transition = "none";
        // ê°•ì œ ë¦¬í”Œë¡œìš° (ë¸Œë¼ìš°ì €ê°€ ìŠ¤íƒ€ì¼ ë³€ê²½ì„ ì¸ì‹í•˜ë„ë¡)
        canvas.offsetHeight;

        // CSS ì• ë‹ˆë©”ì´ì…˜ ì ìš© (í•µì‹¬: cubic-bezierë¡œ ë¶€ë“œëŸ¬ìš´ ê°ì†)
        canvas.style.transition = `transform ${duration}s cubic-bezier(0.25, 0.1, 0.25, 1)`;
        canvas.style.transform = `rotate(${currentRotation}deg)`;

        // ë£°ë ›ì„ íšŒì „í•˜ëŠ” ë™ì•ˆ ê³„ì† ê·¸ë¦¬ê¸°
        const drawInterval = setInterval(() => {
          drawRoulette();
        }, 16); // ì•½ 60fps

        // ì• ë‹ˆë©”ì´ì…˜ ì¢…ë£Œ ì‹œì  ì²˜ë¦¬
        setTimeout(() => {
          clearInterval(drawInterval);
          isSpinning = false;
          spinButton.disabled = false;

          // ë‹¤ìŒ íšŒì „ì„ ìœ„í•´ transitionì„ ì ì‹œ í•´ì œ
          canvas.style.transition = "none";

          showResult();
        }, duration * 1000);
      }

      // ê²°ê³¼ ê³„ì‚° ë° í‘œì‹œ (ê°ë„ ë³´ì •)
      function showResult() {
        // í˜„ì¬ ë£°ë ›ì˜ ê°ë„ë¥¼ 0~360ë„ë¡œ ì •ê·œí™”
        const actualRotation = currentRotation % 360;
        const normalizedAngle =
          actualRotation < 0 ? actualRotation + 360 : actualRotation;

        // í™”ì‚´í‘œ(12ì‹œ ë°©í–¥=270ë„)ê°€ ê°€ë¦¬í‚¤ëŠ” ì§€ì  ì—­ì‚°
        // (270 - í˜„ì¬ê°ë„ + 360) % 360
        let pointerAngle = (270 - normalizedAngle + 360) % 360;

        // í•´ë‹¹ ê°ë„ì— ìœ„ì¹˜í•œ ì•„ì´í…œ ì¸ë±ìŠ¤ ì°¾ê¸°
        const anglePerItem = 360 / penalties.length;
        const index = Math.floor(pointerAngle / anglePerItem);

        // ì¸ë±ìŠ¤ê°€ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ì§€ ì•Šë„ë¡ ë³´ì •
        const resultIndex =
          index >= penalties.length ? penalties.length - 1 : index;

        // ê²°ê³¼ ì¶œë ¥
        const result = penalties[resultIndex];
        resultText.textContent = result;
        resultModal.style.display = "flex";
      }

      // ëª¨ë‹¬ ë‹«ê¸°
      closeModal.addEventListener("click", () => {
        resultModal.style.display = "none";
      });

      resultModal.addEventListener("click", (e) => {
        if (e.target === resultModal) {
          resultModal.style.display = "none";
        }
      });

      // ëŒë¦¬ê¸° ë²„íŠ¼ í´ë¦­
      // íŒŒì›Œ ì»¨íŠ¸ë¡¤ ì´ë²¤íŠ¸ (ë§ˆìš°ìŠ¤)
      spinButton.addEventListener("mousedown", (e) => {
        e.preventDefault();
        startCharging();
      });

      spinButton.addEventListener("mouseup", (e) => {
        e.preventDefault();
        stopCharging();
      });

      spinButton.addEventListener("mouseleave", (e) => {
        if (isCharging) {
          stopCharging();
        }
      });

      // íŒŒì›Œ ì»¨íŠ¸ë¡¤ ì´ë²¤íŠ¸ (í„°ì¹˜ - ëª¨ë°”ì¼)
      spinButton.addEventListener("touchstart", (e) => {
        e.preventDefault();
        startCharging();
      });

      spinButton.addEventListener("touchend", (e) => {
        e.preventDefault();
        stopCharging();
      });

      spinButton.addEventListener("touchcancel", (e) => {
        if (isCharging) {
          stopCharging();
        }
      });

      // ëª¨ë“œ ì „í™˜ ë²„íŠ¼ ì´ë²¤íŠ¸
      modeSwitch.addEventListener("click", switchMode);

      // ë²Œì¹™ ì¶”ê°€ ë²„íŠ¼ ì´ë²¤íŠ¸
      addButton.addEventListener("click", addPenalty);
      resetButton.addEventListener("click", resetPenalties);

      // ì—”í„° í‚¤ë¡œ ë²Œì¹™ ì¶”ê°€
      penaltyInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          addPenalty();
        }
      });

      // ì´ˆê¸°í™” ì‹¤í–‰
      init();
    </script>
  </body>
</html>
